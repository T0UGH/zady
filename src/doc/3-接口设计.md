## 接口列表

| 编号 | 名称                   | 常用度 | 地址                | 描述                                                         |
| ---- | ---------------------- | ------ | ------------------- | ------------------------------------------------------------ |
| 1    | 注册                   | 2-w    | /user               | 向user表新增一条数据，但是很多列一开始无法被初始化           |
| 2    | 注册重名检测           | 2.5-r  | /user/email/{email} | 从user表查询数据，返回单条                                   |
| 3    | 登陆                   | 3-r    | /token              | 从user表查询出一条数据，比对密码是否正常，并通过userId_password_projectId_roleId来生成密钥（内存中管理），将密钥和用户的基本信息返回 |
| 4    | 注销                   | 3-r    | /token              | 简单的从内存中删除密钥                                       |
| 5    | 切换项目               | 2-x    | /token              | 先要对从user和project的关系表中查询和验证，然后重新生成密钥并返回 |
| 6    | 获取单个用户具体信息   | 3-r    | /user               | 从user表查询出某个人员对应的信息，只获取人员信息，人员对应的项目以及角色无法通过此接口获取。 |
| 7    | 更新用户信息           | 1-w    | /user               | 更新user表中的单条记录                                       |
| 8    | 获取人员加入的项目     | 1-r    | /userProjects       | 2. 获取某个人员目前的邀请列表 3. 获取某个人员目前已经假如的项目列表 |
| 9    | 接受加入项目的邀请     | 1-w    | /userProjects       |                                                              |
| 10   | 获取项目中的人员列表   | 2-r    | /projectUsers       | 从user和project的关系集中可查询到，然后从人员表中根据userId查询出人员的具体信息，一并返回 |
| 11   | 更新项目中的人员角色   | 1-w    | /projectUsers       | projectUser表                                                |
| 12   | 删除项目中的人员       | 1-w    | /projectUsers       | projectUser表，假删除，将删除位 置为true                     |
| 13   | 查询多个用户           | 1-r    | /users              | user表，查询，多条                                           |
| 14   | 邀请人员加入项目       | 1-w    | /projectUsers       | 新增一条，若之前存在但是delete为ture，将delete置为false并将invite置为true |
| 15   | 获取项目中的人员       | 1-r    | /projectUsers       | projectUser表，查询，单条，可与6配合使用                     |
| 16   | 获取项目基本信息       | 3-r    | /project            |                                                              |
| 17   | 更新项目基本信息       | 1-w    | /project            | project，更新                                                |
| 18   | 新建项目               | 2-w    | /project            | project，插入                                                |
| 19   | 获取积压工作表         | 3-r    | /schedules          | 1.通过projectId来获取此项目的所有积压工作 2.通过sprintId可以获取某个sprint的所有积压工作 3.通过status+projectId可以获取待办 4.通过status+projectId可以获取当前sprint的积压工作 |
| 20   | 获取单个积压工作       | 3-r    | /schedules          | schedule，查                                                 |
| 21   | 新建积压工作           | 1-w    | /schedules          | schedule，增                                                 |
| 22   | 删除积压工作           | 1-w    | /schedules          | schedule，删                                                 |
| 23   | 更新积压工作           | 2-w    | /schedules          | schedule，改                                                 |
| 24   | 新增当前积压工作表     | 1-w    | /schedules          | schedule，改，状态修改                                       |
| 25   | 移除当前积压工作表     | 1-w    | /schedules          | schedule，改，状态修改                                       |
| 26   | 获取某个项目的冲刺列表 | 2-r    | /sprints            |                                                              |
| 27   | 获取单个冲刺           | 2-r    | /sprint             |                                                              |
| 28   | 获取某个项目的当前冲刺 | 3-r    | /currentSprint      |                                                              |
| 29   | 新建冲刺               | 1-w    |                     |                                                              |
| 30   | 更新冲刺               | 1-w    |                     |                                                              |
| 31   | 获取用户故事列表       | 4-r    | /storys             | 1. 获取某个迭代的用户故事列表 2. 获取某个积压工作的用户故事列表 3. 获取某个迭代中处于某种状态的用户故事列表4.高频操作是获取当前迭代中除了待导入状态的所有用户故事 |
| 32   | 获取单个用户故事       | 4-r    | /story              | story表，查                                                  |
| 33   | 新建用户故事           | 2-w    |                     |                                                              |
| 34   | 更新用户故事           | 4-w    |                     | 经常会更新用户故事的状态，所以这里需要好好考虑是否将状态加入聚簇，但是同样的，根据状态的查询也经常发生，也需要为它建立索引（最好不要将状态加入聚簇，因为聚簇中的数据实在太多了） |
| 35   | 删除用户故事           | 1-w    |                     |                                                              |
| 36   | 获取BUG列表            | 3-r    |                     |                                                              |
| 37   | 获取单个BUG            | 3-r    |                     |                                                              |
| 38   | 新建BUG                | 2-w    |                     |                                                              |
| 39   | 更新BUG                | 2-w    |                     | 也略微高频，这里可以将获取进行缓存，更新时直接更新即可       |
| 40   | 删除BUG                | 1-w    |                     |                                                              |
| 41   | 获取燃尽图数据         | 3-r    |                     | 较高频，这里的难点在于数据的统计工作，可能每次发生用户故事的已完成态切换都需要将数据添加到燃尽图中去 |
| 42   | 获取报表               | 3-r    |                     | 较高频，当创建和删除用户故事时、以及用户故事完成时也需要更新此表，当创建和完成bug时也需要更新，直接往redis放即可，每隔一小时刷新进报表，查询时先查询缓存，缓存未命中再从redis中查找即可，这样可以减轻数据库的压力 |
|      |                        |        |                     |                                                              |
|      |                        |        |                     |                                                              |
|      |                        |        |                     |                                                              |
|      |                        |        |                     |                                                              |
|      |                        |        |                     |                                                              |
|      |                        |        |                     |                                                              |
|      |                        |        |                     |                                                              |
|      |                        |        |                     |                                                              |



## 详细接口列表

***本项目仓库：[http://rap2.taobao.org/repository/editor?id=247327](http://rap2.taobao.org/repository/editor?id=247327) ***